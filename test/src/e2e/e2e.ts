"use strict";

import * as fs from "fs";
import {} from "mocha";
import {createViewModelsFunction} from "../../../src/index";
import {Options, FileDescriptor} from "../../../src/tasks/model/options";
import {expect} from "chai";


describe("E2E Tests", () => {

      it("Hero", (done) => {
      //    this.timeout(15000);
          var options = new Options();
          var files = new Array<FileDescriptor>();
          var file = new FileDescriptor();
          file.source = "test/src/model/hero/hero.ts";
          file.destination = "test/dist/src/_autogenerated_viewmodels/heroes/hero.ts";
          file.baseDestination = "test/dist/src/_autogenerated_viewmodels";
          files.push(file);
          options.files = files;
          options.isOneFile = false;
          var result = createViewModelsFunction(options);
          var expected = fs.readFileSync("./test/src/expected/hero/heroViewModel.ts", "utf-8");
          if (result === expected) {
            console.log("Done");
            done();
          }
      });

});
